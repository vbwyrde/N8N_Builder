# n8n-docker: Workflow Execution Environment

**ğŸ¯ Production environment for AI-generated workflows**

## ğŸš€ Quick Start (Choose Your Speed)

| Time Available | Start Here | What You'll Get |
|----------------|------------|-----------------|
| **2 minutes** | [âš¡ Lightning Start](../LIGHTNING_START.md) | n8n running, no explanations |
| **15 minutes** | [ğŸ“– Getting Started](../GETTING_STARTED.md) | Understanding + webhooks + security |
| **30 minutes** | [ğŸ¯ Complete Setup](guides/SECURITY_SETUP.md) | Production-ready configuration |

## ğŸ—ï¸ How It Works

n8n-docker is the **execution environment** for workflows generated by N8N_Builder:

```mermaid
graph LR
    A[N8N_Builder<br/>Generates JSON] --> B[Copy JSON]
    B --> C[n8n-docker<br/>Import & Execute]
    C --> D[External Access<br/>via nGrok]

    classDef process fill:#e8f5e8
    class A,B,C,D process
```

**Complete System:**
1. **ğŸ¤– [N8N_Builder](../../README.md)** - AI workflow generator
2. **ğŸ³ n8n-docker** (this component) - Production execution
3. **ğŸŒ nGrok tunneling** - External webhook access

**ğŸ­ "I'm setting up for production"**
â†’ [SECURITY.md](SECURITY.md) â†’ [ssl/README.md](../ssl/README.md)

**ğŸ”§ "Something's broken, I need help"**
â†’ FAQ section below â†’ [AUTOMATION-README.md](AUTOMATION-README.md) troubleshooting

**ğŸ“ "I want to understand how everything works"**
â†’ [RunSystem.md](../RunSystem.md)

## ğŸ“ Directory Structure

```
n8n-docker/
â”œâ”€â”€ Documentation/              # ğŸ“š All documentation files
â”‚   â”œâ”€â”€ README.md              # This file - main documentation hub
â”‚   â”œâ”€â”€ QUICK_START.md         # Fast setup guide
â”‚   â”œâ”€â”€ SECURITY.md            # Security guidelines
â”‚   â”œâ”€â”€ CREDENTIALS_SETUP.md   # External service setup
â”‚   â””â”€â”€ AUTOMATION-README.md   # Automation scripts guide
â”œâ”€â”€ RunSystem.md               # Complete system operations guide
â”œâ”€â”€ .env                       # Environment configuration (auto-generated)
â”œâ”€â”€ docker-compose.yml         # Production setup with PostgreSQL
â”œâ”€â”€ docker-compose.dev.yml     # Development setup with SQLite
â”œâ”€â”€ Start-N8N-NgRok.ps1       # ğŸ¤– Automated startup script
â”œâ”€â”€ Stop-N8N-NgRok.ps1        # ğŸ¤– Automated shutdown script
â”œâ”€â”€ start-n8n.bat             # Windows batch startup (double-click)
â”œâ”€â”€ stop-n8n.bat              # Windows batch shutdown (double-click)
â”œâ”€â”€ config/                    # Configuration files
â”œâ”€â”€ data/                      # Local data directory (excluded from git)
â”œâ”€â”€ ssl/                       # SSL certificates (excluded from git)
â”œâ”€â”€ backups/                   # Backup storage (excluded from git)
â””â”€â”€ scripts/                   # Utility scripts
    â”œâ”€â”€ setup-docker.sh       # Initial setup script (Linux/Mac)
    â”œâ”€â”€ setup-docker.bat      # Initial setup script (Windows)
    â”œâ”€â”€ backup.sh             # Backup script (Linux/Mac)
    â”œâ”€â”€ backup.bat            # Backup script (Windows)
    â”œâ”€â”€ restore.sh            # Restore script (Linux/Mac)
    â”œâ”€â”€ maintenance.sh         # Maintenance utilities (Linux/Mac)
    â”œâ”€â”€ setup-blogger-credentials.ps1  # Blogger API setup helper
    â””â”€â”€ update-oauth-urls.ps1  # OAuth URL update automation
```

## ğŸ”’ Security First

**âš ï¸ CRITICAL**: This repository excludes sensitive files for security. Before starting:

1. **Run setup**: `powershell -ExecutionPolicy Bypass -File "../setup.ps1"`
2. **ğŸš¨ IMMEDIATELY change default passwords** in `.env` file
3. **Edit `config.ps1`**: Set your nGrok path (if using automation)

**ğŸ”— See [SECURITY.md](SECURITY.md) for complete security guidelines.**

## ğŸš€ Quick Start

**âš¡ Fastest Method**: See **[QUICK_START.md](QUICK_START.md)** for 3-step setup

### Prerequisites

- âœ… Docker Desktop installed and running
- âœ… 4GB+ RAM and 20GB+ storage available
- âœ… nGrok installed (for webhook access)
- âœ… Basic familiarity with command line

### Choose Your Setup Method

#### Option A: ğŸ¤– Automated (Recommended)
```bash
# Double-click or run from command line:
start-n8n.bat

# Or PowerShell directly:
powershell -ExecutionPolicy Bypass -File "../Start-N8N-NgRok.ps1"
```
**What it does**: Starts Docker + nGrok + Updates webhook URLs automatically

#### Option B: ğŸ“‹ Manual Setup
See **[RunSystem.md](../RunSystem.md)** for complete step-by-step instructions

#### Option C: ğŸƒâ€â™‚ï¸ Development Only (No nGrok)
```bash
# Navigate to n8n-docker directory first
docker-compose -f docker-compose.dev.yml up -d
```
**Access**: http://localhost:5678 (local only, no webhooks)

### ğŸ” Security Configuration (REQUIRED)

**âš ï¸ WARNING**: Default credentials are publicly known!

1. **Edit `.env` file** (created by setup script):
   ```bash
   N8N_BASIC_AUTH_USER=your-username        # Change from 'admin'
   N8N_BASIC_AUTH_PASSWORD=your-password    # Change from 'admin123'
   N8N_ENCRYPTION_KEY=your-secure-key       # Generate new key
   ```

2. **Restart n8n**: `docker-compose restart n8n`

## ğŸ”§ Configuration Options

### Environment Variables

Key variables in `.env` (auto-generated by setup script):

| Variable | Description | Default | Security |
|----------|-------------|---------|----------|
| `N8N_HOST` | Host name for n8n | localhost | âœ… Safe |
| `N8N_PORT` | Port for n8n web interface | 5678 | âœ… Safe |
| `N8N_PROTOCOL` | Protocol (http/https) | http | âœ… Safe |
| `N8N_ENCRYPTION_KEY` | Encryption key for sensitive data | **ğŸš¨ CHANGE THIS** | âš ï¸ Critical |
| `N8N_BASIC_AUTH_USER` | Basic auth username | **ğŸš¨ CHANGE THIS** | âš ï¸ Critical |
| `N8N_BASIC_AUTH_PASSWORD` | Basic auth password | **ğŸš¨ CHANGE THIS** | âš ï¸ Critical |
| `WEBHOOK_URL` | Public webhook URL (nGrok) | Auto-updated | âœ… Safe |
| `DB_TYPE` | Database type | postgresdb | âœ… Safe |
| `GENERIC_TIMEZONE` | System timezone | UTC | âœ… Safe |

### Docker Compose Files

- **docker-compose.dev.yml**: ğŸƒâ€â™‚ï¸ Lightweight SQLite setup for development
- **docker-compose.yml**: ğŸ­ Full PostgreSQL setup for production/testing

**When to use which:**
- **Development**: Use `docker-compose.dev.yml` for simple testing
- **Production/Integration**: Use `docker-compose.yml` for full features

## ğŸ“Š Management Commands

### ğŸ¤– Automated Management (Recommended)
```bash
# Start everything (Docker + nGrok + URL updates)
start-n8n.bat                    # Double-click method
# OR
powershell -ExecutionPolicy Bypass -File "../Start-N8N-NgRok.ps1"

# Stop everything
stop-n8n.bat                     # Double-click method
# OR
powershell -ExecutionPolicy Bypass -File "../Stop-N8N-NgRok.ps1"
```

### ğŸ“‹ Manual Management Commands
```bash
# View container status
docker-compose ps

# View n8n logs
docker-compose logs -f n8n

# Stop services
docker-compose down

# Restart n8n only
docker-compose restart n8n

# Update n8n to latest version
docker-compose pull n8n
docker-compose up -d
```

## ğŸ’¾ Backup and Restore

### Create Backup

**Linux/Mac:**
```bash
./scripts/backup.sh
```

**Windows:**
```cmd
scripts\backup.bat
```

### Restore from Backup

**Linux/Mac:**
```bash
./scripts/restore.sh backup_filename.tar.gz
```

Backups include:
- All workflow data
- Credentials and settings
- Database content
- Configuration files

## ğŸ”’ Security Considerations

**ğŸ”— See [SECURITY.md](SECURITY.md) for complete security guidelines**

### ğŸƒâ€â™‚ï¸ Development Environment Security
- âœ… Basic authentication enabled by default
- âœ… HTTP only (nGrok provides HTTPS termination)
- âœ… PostgreSQL database with Docker isolation
- âš ï¸ **Change default credentials immediately**

### ğŸ­ Production Environment Security
- ğŸš¨ **CRITICAL**: Change all default passwords
- ğŸ”‘ Generate secure encryption keys (32+ characters)
- ğŸŒ Consider nGrok paid plan for static URLs
- ğŸ” Enable HTTPS with SSL certificates (see ssl/README.md)
- ğŸ›¡ï¸ Implement proper firewall rules
- ğŸ“Š Regular security audits and updates

### ğŸ” SSL/HTTPS Setup

**For production HTTPS** (see [ssl/README.md](../ssl/README.md)):
1. Place SSL certificates in the `ssl/` directory
2. Update `.env` file:
   ```bash
   N8N_PROTOCOL=https
   N8N_SSL_KEY=/etc/ssl/certs/privkey.pem
   N8N_SSL_CERT=/etc/ssl/certs/fullchain.pem
   ```
3. Restart containers: `docker-compose restart n8n`

**Note**: For development with nGrok, keep `N8N_PROTOCOL=http` as nGrok handles SSL termination.

## ğŸ”§ Troubleshooting

**ğŸ”— See [AUTOMATION-README.md](AUTOMATION-README.md) for automation-specific troubleshooting**

### ğŸ³ Container Issues
```bash
# Check Docker is running
docker info

# View n8n logs
docker-compose logs n8n

# Check container status
docker-compose ps

# Restart specific container
docker-compose restart n8n
```

### ğŸŒ Access Issues
1. **Can't access http://localhost:5678**:
   - Verify container is running: `docker-compose ps`
   - Check port is not in use: `netstat -an | findstr 5678`
   - Try different port in docker-compose.yml

2. **nGrok tunnel not working**:
   - Check nGrok status: http://127.0.0.1:4040
   - Verify nGrok is authenticated: `ngrok config check`
   - See [CREDENTIALS_SETUP.md](CREDENTIALS_SETUP.md) for OAuth issues

### ğŸ—„ï¸ Database Issues
```bash
# Check PostgreSQL container
docker-compose logs postgres

# Reset database (âš ï¸ destroys data)
docker-compose down -v
docker-compose up -d
```

### âš¡ Performance Issues
```bash
# Monitor resource usage
docker stats

# Increase Docker memory (Docker Desktop â†’ Settings â†’ Resources)
# Recommended: 4GB+ RAM, 2+ CPU cores
```

## ğŸŒ Access URLs

### Local Access
- **n8n Interface**: http://localhost:5678
- **nGrok Monitor**: http://127.0.0.1:4040 (when nGrok is running)

### Public Access (via nGrok)
- **Public n8n**: https://YOUR-NGROK-URL (changes each restart on free plan)
- **Webhook Endpoint**: https://YOUR-NGROK-URL/webhook/YOUR-WEBHOOK-ID

## ğŸ“š Additional Resources

- **ğŸ“– [n8n Official Documentation](https://docs.n8n.io/)**
- **ğŸ’¬ [n8n Community Forum](https://community.n8n.io/)**
- **ğŸ³ [Docker Documentation](https://docs.docker.com/)**
- **ğŸ“¦ [n8n Docker Hub](https://hub.docker.com/r/n8nio/n8n)**
- **ğŸŒ [nGrok Documentation](https://ngrok.com/docs)**

## ğŸ¤ Integration with N8N_Builder Project

This Docker environment is designed to execute workflows generated by the N8N_Builder AI system:

### **ğŸ”„ Workflow Integration Methods:**

#### **Method 1: Manual Import (Recommended for beginners)**
1. **Generate**: Use [N8N_Builder web interface](http://localhost:8000) to create workflows
2. **Copy**: Copy the generated JSON workflow
3. **Import**: In n8n (http://localhost:5678) â†’ Settings â†’ Import from JSON
4. **Deploy**: Paste JSON and activate the workflow

#### **Method 2: API Integration (For developers)**
```bash
# Generate workflow with N8N_Builder API
curl -X POST "http://localhost:8000/generate" \
  -H "Content-Type: application/json" \
  -d '{"description": "Your automation description"}'

# Import to n8n via n8n REST API
curl -X POST "http://localhost:5678/rest/workflows" \
  -H "Content-Type: application/json" \
  -d @generated_workflow.json
```

#### **Method 3: File System Integration**
- **ğŸ“ Projects Mount**: `../projects` â†’ `/home/node/projects` in container
- **ğŸ”— API Integration**: N8N_Builder can interact via n8n REST API
- **ğŸ“Š Shared Data**: Common data directory for file exchange
- **ğŸ”„ Workflow Sync**: Workflows can reference N8N_Builder project files

**ğŸ“– Complete Integration Guide**: [Master Documentation Index](../../DOCUMENTATION_INDEX.md#integration-guide)

## ğŸ“ Maintenance Schedule

### ğŸ“… Daily
- Monitor container health: `docker-compose ps`
- Check log files: `docker-compose logs n8n --tail 50`

### ğŸ“… Weekly
- Create backups: `./scripts/backup.sh` or `scripts\backup.bat`
- Update n8n: `docker-compose pull && docker-compose up -d`
- Clean up: `docker system prune`

### ğŸ“… Monthly
- Review security settings and rotate passwords
- Update SSL certificates (if using HTTPS)
- Archive old backups
- Review and update documentation

## â“ Frequently Asked Questions (FAQ)

### ğŸš€ Getting Started
**Q: I'm completely new to n8n. Where do I start?**
A: Start with [QUICK_START.md](QUICK_START.md) for a 5-minute setup, then read [SECURITY.md](SECURITY.md) to secure your installation.

**Q: Should I use the automated scripts or manual setup?**
A: Use automated scripts ([AUTOMATION-README.md](AUTOMATION-README.md)) for daily use. Use manual setup ([RunSystem.md](../RunSystem.md)) for learning or troubleshooting.

**Q: Do I need nGrok for n8n?**
A: Only if you want webhooks from external services. For local-only workflows, you can skip nGrok and just use http://localhost:5678.

### ğŸ”’ Security
**Q: Are the default credentials secure?**
A: **NO!** Default credentials (admin/admin123) are publicly known. Change them immediately in the .env file.

**Q: Is it safe to use nGrok for production?**
A: nGrok free plan is fine for development. For production, consider nGrok paid plan or proper SSL certificates with domain hosting.

**Q: What files should never be committed to git?**
A: Never commit .env, config.ps1, data/, backups/, logs/, or ssl/*.key files. See [SECURITY.md](SECURITY.md) for complete list.

### ğŸ”§ Technical Issues
**Q: n8n won't start - what should I check?**
A: 1) Docker running? 2) Port 5678 free? 3) Check logs: `docker logs n8n-dev` 4) Verify .env file syntax

**Q: nGrok URL keeps changing - how do I handle this?**
A: Free nGrok URLs change on restart. Use automation scripts for auto-updates, or upgrade to nGrok paid plan for static URLs.

**Q: Can I use both PostgreSQL and SQLite?**
A: Choose one. Use PostgreSQL (docker-compose.yml) for full features, SQLite (docker-compose.dev.yml) for simple development.

### ğŸ”‘ External Services
**Q: How do I connect Google services?**
A: Follow [CREDENTIALS_SETUP.md](CREDENTIALS_SETUP.md) for step-by-step OAuth setup with current nGrok URLs.

**Q: My OAuth callbacks aren't working - what's wrong?**
A: Check that redirect URLs in external services exactly match your current nGrok URL + callback path.

**Q: Can I use multiple external services at once?**
A: Yes! Set up each service separately following the credentials guide. Each service needs its own OAuth application.

### ğŸ¤– Automation
**Q: The automation script failed - what should I do?**
A: Run with `-Verbose` parameter to see detailed output, check [AUTOMATION-README.md](AUTOMATION-README.md) troubleshooting section.

**Q: Can I customize the automation scripts?**
A: Yes! Scripts support parameters like -SkipDocker, -SkipNgrok, -DevMode. See [AUTOMATION-README.md](AUTOMATION-README.md) for all options.

## ğŸ†˜ Getting Help

1. **ğŸ“– Check Documentation**: Start with [QUICK_START.md](QUICK_START.md)
2. **â“ Check FAQ**: Review the FAQ section above
3. **ğŸ” Search Issues**: Check troubleshooting sections in each guide
4. **ğŸ’¬ Community**: Visit [n8n Community Forum](https://community.n8n.io/)
5. **ğŸ› Report Bugs**: Use GitHub issues for project-specific problems

## ğŸ¯ Quick Action Items for New Users

### âœ… Essential First Steps (Do These Now!)
1. **ğŸš€ [Quick Setup](QUICK_START.md)** - Get running in 5 minutes
2. **ğŸ”’ [Secure Installation](SECURITY.md)** - Change default passwords
3. **ğŸ”‘ [Connect Services](CREDENTIALS_SETUP.md)** - Set up external integrations

### ğŸ“š Learn More (When Ready)
1. **ğŸ¤– [Automation](AUTOMATION-README.md)** - Master the automation scripts
2. **ğŸ“‹ [Manual Operations](../RunSystem.md)** - Understand the system deeply
3. **ğŸ” [SSL Setup](../ssl/README.md)** - Production HTTPS configuration

---

**ğŸ‰ Ready to automate everything with n8n!** Start with [QUICK_START.md](QUICK_START.md) for the fastest setup.
